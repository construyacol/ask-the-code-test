(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{391:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(5),r=a.n(n),c=a(355);function o(e){return function(t){var a=Object(c.a)(!0,"cancel-button-".concat(t.eventName),8,!0,t.eventName,!0),n=Object(c.a)(!0,"accept-button-".concat(t.eventName),13,!1,t.eventName,!0);return r.a.createElement(e,Object.assign({idCancel:a,idAccept:n},t))}}},561:function(e,t,a){},622:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a(0),c=a.n(r),o=a(2),s=a(12),i=a(14),u=a(17),p=a(16),l=a(18),m=a(5),d=a.n(m),f=a(66),h=a(357),b=a(67),_=a(359),v=a(366),w=function(e){var t=e.elements,a=e.label,n=e.open,r=e.active,c=e.placeholder;return d.a.createElement("div",{className:"containerInputComponent"},d.a.createElement("p",{className:"labelText fuente"},a),d.a.createElement("div",{className:"inputContainer2 ".concat(r?"inputActivado":"")},d.a.createElement("div",{className:"InputDropDown ".concat(r?"activeText":""),onClick:e.abrir},c,d.a.createElement("div",{className:"InputDesplegable ".concat(n?"Idesplegado":""),style:{height:n?"".concat(45*t.length,"px"):"0px"}},t.map(function(t,a){return d.a.createElement("p",{key:a,"data-value":t.value,"data-ui_name":t.ui_name,onClick:e.selectItem},t.ui_name," ")})))))},y=(a(388),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={elements:a.props.elements,open:!1,placeHolder:a.props.placeholder},a.abrir=function(e){a.setState({open:!a.state.open})},a.selectItem=function(e){var t={target:{name:a.props.name,value:e.target.dataset.value}};a.setState({placeHolder:e.target.dataset.ui_name}),a.props.actualizarEstado(t)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.selected&&this.props.elements){var t=this.props.elements.findIndex(function(t){return t.value===e.props.selected});this.setState({placeHolder:this.props.elements[t].ui_name})}}},{key:"render",value:function(){var e=this.props,t=e.label,a=e.active;return d.a.createElement(w,{elements:this.state.elements,open:this.state.open,abrir:this.abrir,placeholder:this.state.placeHolder,selectItem:this.selectItem,label:t,active:a})}}]),t}(m.Component)),k=a(505),g=a(466),E=a(541),j=a.n(E),O=a(64),C=a(34),x=a(65),S=a(21),N=a(35),A=a(374),z=a(391),F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={banks:null,cities:null,loader:!1},a.initComponent=Object(o.a)(c.a.mark(function e(){var t,n,r,o,s,i,u,p;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.withdraw_providers_list,a.setState({loader:!0}),(n=t)&&(!n||n.length)){e.next=5;break}return e.abrupt("return",Object(N.a)("?message=Vuelve a iniciar session"));case 5:return r=n&&n[0].info_needed.bank_name,e.next=8,Object(S.serveBankOrCityList)(r,"bank");case 8:return o=e.sent,e.next=11,Object(S.addIndexToRootObject)(n&&n[0].info_needed.id_type);case 11:return s=e.sent,e.next=14,Object(S.objectToArray)(s);case 14:return i=e.sent,e.next=17,Object(S.addIndexToRootObject)(n&&n[0].info_needed.account_type);case 17:return u=e.sent,e.next=20,Object(S.objectToArray)(u);case 20:return p=e.sent,e.next=23,a.props.actualizarEstado({target:{name:"currency",value:n[0].currency}});case 23:console.log("|||||||||||||||||||||||||||||||||||||||||||serve_bank_list",o),a.setState({banks:o,id_types:i,account_types:p,loader:!1});case 25:case"end":return e.stop()}},e)})),a.update_city=function(e){var t={target:{name:"city",value:e.code}};a.props.actualizarEstado(t)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.initComponent(),this.props.actualizarEstado({target:{name:"provider_type",value:"bank"}})}},{key:"componentDidUpdate",value:function(e){this.props}},{key:"render",value:function(){var e=this.props,t=e.statusInput,a=e.handleKeyPress,n=e.short_name,r=e.siguiente,s=e.update_control_form,i=e.handleSubmit,u=e.account_number,p=e.account_type,l=e.bank_name,f=e.step,b=e.search,w=e.name,E=e.actualizarEstado,O=e.final_step_create_account,C=e.idAccept,x=this.state,S=x.banks,N=x.loader;return console.log("|||||| step::",f),d.a.createElement(m.Fragment,null,2===f&&d.a.createElement("div",{className:"nBstep1 fuente"},d.a.createElement("div",{className:"titleNewAccount"},d.a.createElement("img",{src:j.a,alt:"",height:"70"}),d.a.createElement("p",null,"Genial ",d.a.createElement("strong",null,w))),d.a.createElement("p",{className:"nBtextInit fuente"}," ","Al a\xf1adir una cuenta bancaria para realizar tus retiros de moneda local por primera vez, el tiempo promedio que tarda para inscribirse son 2 horas h\xe1biles a partir del momento en que se realiz\xf3 el proceso. Tener tu cuenta inscrita previamente puede hacer que tus retiros en moneda local se ejecuten m\xe1s r\xe1pido."),d.a.createElement("div",{id:"bankChooseButton"},d.a.createElement(_.b,{_id:C,type:"primary",active:!0,siguiente:r},"OK, comencemos"))),3===f&&d.a.createElement("div",{className:"step1"},d.a.createElement("form",{onSubmit:i,className:"NWithdrawAccountFlow"},d.a.createElement("div",{className:"titleAccountFlow"},d.a.createElement("h1",{className:"DLtitles2"},"Elige la entidad bancaria"),d.a.createElement("p",{className:"fuente DLstitles"},"de la cuenta que quieres agregar:")),N?d.a.createElement(h.default,{label:"Cargando..."}):d.a.createElement(k.a,{type:"banks",autoFocus:!0,items:S,format:"svg",itemSelect:l,actualizarEstado:E,handleSubmit:i,update_control_form:s}),d.a.createElement("div",{id:"bankChooseButton"},d.a.createElement(_.i,{id:C,preventSubmit:!0,label:"Continuar",type:"primary",active:1===b.length&&""!==l})))),(4===f||5===f)&&d.a.createElement("div",{className:"step2"},d.a.createElement("div",{id:"contMsg",className:"contMsg",style:{gridTemplateRows:4===f?"auto 1fr 15vh":f>=5?"auto 1fr":""}},d.a.createElement("div",{className:"nBcontBank"},d.a.createElement(g.default,{format:"svg",actives:!0,type:"bank",code:n,name:l})),4===f&&d.a.createElement("form",{className:"formAccountFlow",onSubmit:function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:O(t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},d.a.createElement("div",{className:"contForminputsAccount"},d.a.createElement(y,{placeholder:"Tipo de cuenta",elements:this.state.account_types,label:"Elige el tipo de cuenta:",actualizarEstado:E,name:"account_type",selected:p,active:p&&u}),d.a.createElement(v.c,{type:"text",label:"Escribe el n\xfamero de cuenta",placeholder:"Ej. 1123321...",name:"account_number",autoFocus:!0,actualizarEstado:E,active:p&&u,value:u,handleKeyPress:a,status:t})),d.a.createElement("div",{id:"bankChooseButton",className:"contbuttonAccount"},d.a.createElement(_.i,{id:C,preventSubmit:!0,label:"Continuar",type:"primary",active:p&&u}))))))}}]),t}(m.Component);var I=Object(A.a)([function(e){return e.modelData.user.withdrawProviders},function(e){return e.modelData.withdrawProviders}],function(e,t){var a=[];return e&&e.map(function(e){return"bank"===t[e].provider_type&&a.push(t[e])}),a});var D=Object(O.b)(function(e){var t=e.modelData.user;return{withdraw_providers_list:I(e),user:t,current:e.form.current}},function(e){return{action:Object(C.bindActionCreators)(x.a,e)}})(Object(z.a)(F)),P=(a(561),a(191),Object(f.a)(function(){return a.e(46).then(a.bind(null,620))})),T=Object(f.a)(function(){return Promise.all([a.e(2),a.e(1),a.e(4),a.e(7),a.e(31)]).then(a.bind(null,618))}),B=Object(f.a)(function(){return a.e(83).then(a.bind(null,853))}),K=function(e){var t=e.siguiente,a=e.step,n=e.select_withdraw_way,r=e.withdraw_way,c=e.ticket,o=e.finalizar,s=e.eventName;return d.a.createElement("div",{className:"containerFormWallet"},1===a&&d.a.createElement(m.Fragment,null,d.a.createElement(P,{title:"En esta cuenta deseas",subtitle:"efectuar los retiros por:",items:b.g,select_method:n,item_active:r,siguiente:t,withdraw:!0})),a>=2&&"bankaccount"===r&&d.a.createElement(D,Object.assign({eventName:s},e)),a>=2&&"cash"===r&&d.a.createElement(B,e),6===a&&d.a.createElement(m.Fragment,null,c?d.a.createElement(T,{finishAction:o,ticket:c,ticket_type:"withdraw_form"}):d.a.createElement(h.default,{label:"Creando Cuenta de retiro"})))},L=a(378),M=a(371),U=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={name:a.props.user.name,surname:a.props.user.surname,bank_name:a.props.form_bank.bank_name,account_type:a.props.form_bank.account_type,account_number:a.props.form_bank.account_number,short_name:a.props.form_bank.short_name,id_type:null,statusInput:"",withdraw_way:"bankaccount",provider_type:"",id_number:"",city:"medellin",email:a.props.user.email,currency:null,ticket:null},a.update_control_form=function(e){switch((!e||a.props.search.length>1)&&a.props.action.UpdateFormControl("bank",!1),a.props.step){case 3:1===a.props.search.length&&a.props.action.UpdateFormControl("bank",!0);break;case 5:""!==a.state.account_type&&""!==a.state.account_number&&a.props.action.UpdateFormControl("bank",!0);break;default:console.log("")}},a.select_withdraw_way=function(){var e=Object(o.a)(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({withdraw_way:n,provider_type:"bankaccount"===n?"bank":""});case 2:a.update_form();case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleKeyPress=function(e){var t=window.event?window.event.keyCode:e.which;return t<48||t>57?(a.setState({statusInput:"Solo se aceptan n\xfameros en este campo"}),!0):(a.setState({statusInput:""}),/\d/.test(String.fromCharCode(t)))},a.handleSubmit=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.actualizarEstado(t),e.next=4,a.siguiente();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.final_step_create_account=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.handleSubmit(t);case 2:a.crearCuenta();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.crearCuenta=Object(o.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.action.isAppLoading(!0),e.next=3,a.props.coinsendaServices.addNewWithdrawAccount(a.state);case 3:if(t=e.sent){e.next=8;break}return a.props.action.ReduceStep(a.props.current,2),a.props.toastMessage("No es posible crear la cuenta ahora.","error"),e.abrupt("return",a.props.action.isAppLoading(!1));case 8:return e.next=10,a.props.coinsendaServices.fetchWithdrawAccounts();case 10:if(!a.props.withdraw_flow){e.next=12;break}return e.abrupt("return",a.props.withdraw_flow_action(t));case 12:return e.next=14,a.setState({ticket:t});case 14:a.props.action.success_sound(),a.update_form(),a.props.action.isAppLoading(!1),a.props.action.ModalView("modalSuccess");case 18:case"end":return e.stop()}},e)})),a.actualizarEstado=function(){var e=Object(o.a)(c.a.mark(function e(t){var r,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.persist&&t.persist(),t.target&&t.target.short_name&&a.setState({short_name:t.target.short_name}),r=t.target.name,o=t.target.value,window.requestAnimationFrame(function(){var e=!1,t=50;if(r&&"id_number"===r)if(e=!0,"pasaporte"===a.state.id_type){if(o&&!/^[a-zA-Z0-9]{1,20}$/g.test(o))return}else if("nit"===a.state.id_type)t=11,o=o.replace(/(\d{9})(\d{1})/,"$1-$2");else if(o&&!/^[0-9]{1,12}$/g.test(o))return;r&&"account_number"===r&&(o=o.replace(/[^0-9]/g,""),e=!0,t=20),e&&o.length>t&&(o=o.slice(0,t)),r&&a.setState(Object(n.a)({},r,o)),a.update_control_form(o),a.update_form()});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.update_form=function(){a.props.action.UpdateForm("bank",a.state)},a.siguiente=Object(o.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==a.props.step){e.next=3;break}return e.next=3,a.cleanSearch();case 3:return e.abrupt("return",a.props.action.IncreaseStep(a.props.current));case 4:case"end":return e.stop()}},e)})),a.finalizar=function(e){a.props.action.CleanForm("bank"),a.props.action.CleanForm("withdraw")},a.cleanSearch=function(){a.setState({bank_name:""}),a.props.action.UpdateFormControl("bank",!1),a.props.action.cleanSearch("bank")},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(setTimeout(function(){e.props.history.push("?form=wa_terms")},100),this.props.withdraw_flow)return this.props.action.CurrentForm("withdraw");this.props.action.CurrentForm("bank")}},{key:"componentDidUpdate",value:function(e){var t,a=this;e.step!==this.props.step&&(2===this.props.step&&(t="?form=wa_terms"),3===this.props.step&&(t="?form=wa_choose_bank"),4===this.props.step&&(t="?form=wa_enter_bank_details"),5===this.props.step&&(t="?form=wa_id_type"),6===this.props.step&&(t="?form=wa_opening_city"),7===this.props.step&&(t="?form=wa_success"),setTimeout(function(){a.props.history.push(t)},100))}},{key:"render",value:function(){var e=this.props,t=e.step,a=e.search,n=e.withdraw_flow,r=e.withdraw_flow_action,c=e.eventName,o=void 0===c?"onkeyup":c;return d.a.createElement(K,Object.assign({withdraw_flow:n,withdraw_flow_action:r,statusInput:this.state.statusInput,handleKeyPress:this.handleKeyPress,crearCuenta:this.crearCuenta,siguiente:this.siguiente,actualizarEstado:this.actualizarEstado,handleSubmit:this.handleSubmit,update_control_form:this.update_control_form,buttonActive:this.props.buttonActive,loader:this.props.loader,finalizar:this.finalizar,step:t,select_withdraw_way:this.select_withdraw_way,cleanSearch:this.cleanSearch,initPrevKeyActions:this.props.initPrevKeyActions,search:a,final_step_create_account:this.final_step_create_account,eventName:o},this.state))}}]),t}(m.Component),q=Object(A.a)([function(e){return e.modelData.user.withdrawProviders},function(e){return e.modelData.withdrawProviders}],function(e,t){return e&&e.map(function(e){return t[e]})});t.default=Object(L.h)(Object(O.b)(function(e,t){var a=t.withdraw_flow,n=e.modelData.user;return{search:e.form.search_bank,withdrawProviders:q(e),form_bank:e.form.form_bank,buttonActive:e.form.form_control_bank,loader:e.isLoading.loader,current:e.form.current,step:a?e.form.form_withdraw.step:e.form.form_bank.step,user:n}},function(e){return{action:Object(C.bindActionCreators)(x.a,e)}})(Object(M.a)(U)))}}]);
//# sourceMappingURL=41.e0cf7d76.chunk.js.map