(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{382:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(5),r=a.n(n),c=a(354);function s(e){return function(t){var a=Object(c.a)(!0,"cancel-button-".concat(t.eventName),8,!0,t.eventName,!0),n=Object(c.a)(!0,"accept-button-".concat(t.eventName),13,!1,t.eventName,!0);return r.a.createElement(e,Object.assign({idCancel:a,idAccept:n},t))}}},392:function(e,t,a){},393:function(e,t,a){},395:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(2),s=a(12),i=a(14),o=a(18),l=a(16),u=a(17),p=a(5),m=a.n(p),d=a(358),f=a(63),h=a(34),b=a(64),v=a(44),g=a(506),y=a(502);a(392);function _(e){var t=Object(y.a)({},e);return m.a.createElement("input",Object.assign({type:"range"},t))}var x=a(367),k=a(439),E=3,j=.5,O=4/3,w=.05;function S(e){var t=e.image,a=e.onCropComplete,n=Object(p.useState)({x:0,y:0}),r=Object(v.a)(n,2),c=r[0],s=r[1],i=Object(p.useState)(1),o=Object(v.a)(i,2),l=o[0],u=o[1],d=Object(p.useState)(360),f=Object(v.a)(d,2),h=f[0],b=f[1];return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"crop-container"},m.a.createElement(g.a,{image:t,style:{cropAreaStyle:{minWidth:256,minHeight:192}},rotation:h,onRotationChange:b,crop:c,aspect:O,zoom:l,onCropChange:s,onZoomChange:u,onCropComplete:function(e,t){return a(t,h)}})),m.a.createElement("div",{className:"crop-controls"},m.a.createElement("div",null,m.a.createElement(x.c,{color:"gray",size:20,onClick:function(){return l>.1&&u(l-.3)}}),m.a.createElement(_,{value:l,onChange:function(e){return u(e.currentTarget.value)},step:w,min:j,max:E}),m.a.createElement(k.a,{color:"gray",size:20,onClick:function(){return l<7&&u(l+.3)}})),m.a.createElement("div",null,m.a.createElement(k.b,{color:"gray",size:20,onClick:function(){var e=h-90;b(e<0?360:e)}}))))}a(393);var N=function(e){return new Promise(function(t,a){var n=new Image;n.addEventListener("load",function(){return t(n)}),n.addEventListener("error",function(e){return a(e)}),n.setAttribute("crossOrigin","anonymous"),n.src=e})};function C(e,t){return I.apply(this,arguments)}function I(){return(I=Object(c.a)(r.a.mark(function e(t,a){var n,c,s,i,o,l,u,p,m=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.length>2&&void 0!==m[2]?m[2]:0,e.next=3,N(t);case 3:if(c=e.sent,s=document.createElement("canvas"),i=s.getContext("2d")){e.next=8;break}return e.abrupt("return",null);case 8:return o=Math.max(c.width,c.height),l=o/2*Math.sqrt(2)*2,s.width=l,s.height=l,i.translate(l/2,l/2),i.rotate(n*Math.PI/180),i.translate(-l/2,-l/2),i.drawImage(c,l/2-.5*c.width,l/2-.5*c.height),u=i.getImageData(0,0,l,l),s.width=a.width,s.height=a.height,i.putImageData(u,0-l/2+.5*c.width-a.x,0-l/2+.5*c.height-a.y),p=new Promise(function(e,t){s.toBlob(function(t){e(URL.createObjectURL(t))},"image/jpeg")}),e.abrupt("return",{base64:s.toDataURL("image/jpeg"),urlImg:p});case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}var L=a(382),A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={imageSrc:a.props.imageSrc||null,crop:{x:0,y:0},zoom:1,aspect:4/3,croppedAreaPixels:null,imgRotation:0,croppedImage:null},a.onCropChange=function(e){a.setState({crop:e})},a.onCropComplete=function(e,t){a.setState({croppedAreaPixels:e,imgRotation:t})},a.onZoomChange=function(e){var t=a.state.zoom;e>t&&e<=3?t+=.06:t=e,a.setState({zoom:t})},a.showCroppedImage=function(){var e=Object(c.a)(r.a.mark(function e(t,n,c){var s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.action.isAppLoading(!0);case 2:return e.next=4,C(a.state.imageSrc,a.state.croppedAreaPixels,a.state.imgRotation);case 4:if(s=e.sent){e.next=7;break}return e.abrupt("return",a.props.action.isAppLoading(!1));case 7:return i=s.urlImg,e.next=10,a.setState({croppedImage:i});case 10:a.props.subirImg(s);case 11:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.cancelCroppedImg=function(){a.setState({croppedImage:null}),a.props.cancelarSubidaImg()},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({imageSrc:e.imageSrc})}},{key:"render",value:function(){return m.a.createElement("div",{className:"App"},this.state.imageSrc&&m.a.createElement(p.Fragment,null,m.a.createElement(S,{onCropComplete:this.onCropComplete,image:this.state.imageSrc}),m.a.createElement("div",{className:"ImgCropcontrols"},m.a.createElement(d.b,{_id:this.props.idCancel,active:!0,type:"secundary",siguiente:this.cancelCroppedImg},"Cancelar"),m.a.createElement(d.b,{_id:this.props.idAccept,active:!0,type:"primary",siguiente:this.showCroppedImage},"Guardar"))))}}]),t}(m.a.Component);t.a=Object(f.b)(null,function(e){return{action:Object(h.bindActionCreators)(b.a,e)}})(Object(L.a)(A))},468:function(e,t,a){var n={"./docs/back.png":822,"./docs/front.png":823,"./docs/front_passport.png":824,"./docs/selfie.png":825,"./docs/selfie3.png":826,"./docs/selfie_passport.png":827,"./docs/selfie_passport3.png":828,"./docs/selfies.png":829,"./kycDashboardLayout":558,"./kycDashboardLayout.js":558};function r(e){var t=c(e);return a(t)}function c(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=468},508:function(e,t,a){"use strict";var n=a(5),r=a.n(n),c=a(65),s=a(358),i=a(12),o=a(14),l=a(18),u=a(16),p=a(17),m=a(616),d=a.n(m),f=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={width:null,height:null},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=window.innerWidth,t=window.innerHeight;this.setState({width:e,height:t})}},{key:"render",value:function(){var e=this.state,t=e.width,a=e.height,n={position:"absolute",top:"0px",left:"-40px",width:t,height:a,zIndex:-1};return r.a.createElement("div",{style:n},t&&a&&r.a.createElement(d.a,{width:t,height:a,numberOfPieces:80,gravity:.05,recycle:!0,opacity:.6}))}}]),t}(n.Component),h=a(354),b=Object(c.a)(function(){return Promise.resolve().then(a.bind(null,355))});t.a=function(e){var t=e.user_name,a=e.exit,n=e.siguiente,c=e.confetti,i=e.cta_primary_text,o=e.cta_secondary,l=e.title,u=e.cta_text,p=e.classes,m=Object(h.a)(o,"exit-button-success",8,!1,"onkeyup",!0),d=Object(h.a)(!0,"continue-button-success",13,!1,"onkeyup",!0);return r.a.createElement("div",{className:"KycLayoutBasicWin",id:"callese"},r.a.createElement("h1",{className:"fuente KycTitles"},"Genial ",t),r.a.createElement(b,{withoutwrapper:!0,icon:"accepted",size:window.innerWidth>768?190:150}),r.a.createElement("p",{className:"KycParra1 ".concat(p," fuente")},l),r.a.createElement("p",{className:"fuente continueKyc"},u),r.a.createElement("div",{className:"Kyccontrols"},r.a.createElement("div",{className:"Kcontrols"},window.innerWidth>350&&o&&r.a.createElement(s.b,{_id:m,active:!0,type:"secundary",siguiente:o?a:null},"Lo har\xe9 despues"),r.a.createElement(s.b,{_id:d,active:!0,type:"primary",siguiente:n},i))),c&&r.a.createElement(f,null))}},558:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),c=a(358),s=a(618),i=a(4),o=a(354);t.default=function(e){var t=e.step,l=e.front,u=e.back,p=e.selfie,m=e.goFileLoader,d=e.prevState,f=e.animation,h=e.action,b=e.animation2,v=e.id_type,g=e.base64,y=e.fileloader,_=g.newfront,x=g.newselfie,k=g.newback,E=Object(o.a)(!y,"upload-pic-button",13,!0,"onkeyup",!0);return r.a.createElement("div",{className:"KycDashBoard"},r.a.createElement("div",{className:"imgDashContainer"},r.a.createElement("p",{className:"fuente ".concat(t>3?"topThree":"")},1===t?"1. Frente del documento":2===t?"2. Rev\xe9s del documento":3===t||4===t?"3. Selfie con documento y texto":"\xa1Lo hiciste muy Bien!"),r.a.createElement(s.a,{type:"green"},r.a.createElement("div",{className:"imgDashContainerD ".concat(f?"imgDCAnim":"")},r.a.createElement("div",{className:"imgDashSon"},r.a.createElement("img",{className:"imgDashItem ".concat(v," ").concat(b?"frontImg":""),src:a(468)("".concat(l)),style:{opacity:1===d?"1":"0",zIndex:2},alt:"",width:"100%"}),r.a.createElement("img",{className:"imgDashItem ".concat(b?"backImg":"backInit"),src:a(468)("".concat(u)),style:{opacity:d>2||"pasaporte"===v?"0":"1",zIndex:1},alt:"",width:"100%"}),r.a.createElement("img",{className:"imgDashItem",src:a(468)("".concat(p)),style:{opacity:d>2?"1":"0"},alt:"",width:"100%"})))),r.a.createElement("div",{className:"imgDashCarousel",style:{gridTemplateColumns:"pasaporte"===v?"repeat(2, 1fr)":"repeat(3, 1fr)",maxWidth:"pasaporte"===v?"260px":"400px"}},r.a.createElement("div",{className:"imgDashStep ".concat(1===t?"active":""),title:"1"},_?r.a.createElement(n.Fragment,null,r.a.createElement("img",{className:"imgDashItem",src:_,alt:"",width:"80",title:"1"}),r.a.createElement("i",{className:"fas fa-check-circle"})):r.a.createElement("img",{className:"imgDashItem ".concat(v),src:a(468)("".concat(l)),alt:"",width:"80",title:"1"})),"pasaporte"!==v&&r.a.createElement("div",{className:"imgDashStep ".concat(2===t?"active":""),title:"2"},k?r.a.createElement(n.Fragment,null,r.a.createElement("i",{className:"fas fa-check-circle"}),r.a.createElement("img",{className:"imgDashItem",src:k,alt:"",width:"80",title:"2"})):r.a.createElement("img",{className:"imgDashItem",src:a(468)("".concat(u)),alt:"",width:"80",title:"2"})),r.a.createElement("div",{className:"imgDashStep ".concat(3===t||4===t?"active":""),title:"3"},x?r.a.createElement(n.Fragment,null,r.a.createElement("i",{className:"fas fa-check-circle"}),r.a.createElement("img",{className:"imgDashItem",src:x,alt:"",width:"80",title:"3"})):r.a.createElement("img",{className:"imgDashItem",src:a(468)("".concat(p)),alt:"",width:"80",title:"3"}))),r.a.createElement("div",{className:"controlContainers"},t<4?r.a.createElement("div",{className:"contButtonUpload"},r.a.createElement("input",{id:y?"":E,type:"file",accept:i.b.join(),onChange:m}),r.a.createElement(c.b,{active:!0,type:"primary"}," ","Subir Foto")):r.a.createElement(c.b,{active:!0,type:"primary",siguiente:h.toggleModal}," ","Finalizar"))))}},618:function(e,t,a){"use strict";var n=a(5),r=a.n(n);a(821);t.a=function(e){var t=e.type;return r.a.createElement("div",{className:"".concat("green"===t?"imgDashFramework":"imgDashFramework2 MarcoPolo","  ")},r.a.createElement("i",{className:"".concat("green"===t?"fas fa-check-circle green":"fas fa-times-circle reds","  IconMarco")}),r.a.createElement("div",{className:"top_left ".concat("green"===t?"green corner":"reds corner2")}),r.a.createElement("div",{className:"top_right   ".concat("green"===t?"green corner":"reds corner2")}),r.a.createElement("div",{className:"bottom_right  ".concat("green"===t?"green corner":"reds corner2"," ")}),r.a.createElement("div",{className:"bottom_left  ".concat("green"===t?"green corner":"reds corner2"," ")}),e.children,r.a.createElement("p",{className:"textMarc ".concat("green"===t?"green":"reds")},"green"===t?"":"EJEMPLO INCORRECTO"))}},821:function(e,t,a){},822:function(e,t,a){e.exports=a.p+"static/media/back.4f4de654.png"},823:function(e,t,a){e.exports=a.p+"static/media/front.3f18ecab.png"},824:function(e,t,a){e.exports=a.p+"static/media/front_passport.824c89a3.png"},825:function(e,t,a){e.exports=a.p+"static/media/selfie.8d77a918.png"},826:function(e,t,a){e.exports=a.p+"static/media/selfie3.2442a515.png"},827:function(e,t,a){e.exports=a.p+"static/media/selfie_passport.32d53b90.png"},828:function(e,t,a){e.exports=a.p+"static/media/selfie_passport3.266ddd13.png"},829:function(e,t,a){e.exports=a.p+"static/media/selfies.08a8be26.png"},830:function(e,t,a){},855:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(1),s=a(2),i=a(44),o=a(5),l=a.n(o),u=a(7),p=a(12),m=a(14),d=a(18),f=a(16),h=a(17),b=a(366),v=a.n(b),g=a(368),y=function(e){return l.a.createElement(g.e,e)},_=a(66),x=a(63),k=a(34),E=a(64),j=a(21),O=a(33).a.CountryUrl,w=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).itemSelection=function(){var e=a.props.item;a.props.select_item(e)},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.active,n=e.suffixText,r=t.name,c=t.flag;return l.a.createElement("div",{className:"ItemListKycBasic ".concat(a?"active":""),onClick:this.itemSelection},l.a.createElement("p",{className:"fuente"},c&&l.a.createElement("img",{src:"".concat(O).concat(c),alt:"",width:30}),r,n&&" | ( ".concat(n," )")))}}]),t}(o.Component),S=a(370),N=a(590),C=_.d.kyc_basic.natural,I=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={select_values:{}},a.init_component=Object(s.a)(r.a.mark(function e(){var t,n,s,i,o,l,u,p,m,d,f;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.action.CurrentForm("kyc_basic");case 2:return t=a.props.form_kyc_basic_state,e.next=5,a.props.coinsendaServices.getVerificationState();case 5:if((n=e.sent)&&"rejected"!==n){e.next=40;break}return a.props.action.isAppLoading(!0),s=a.props.user,e.next=11,a.props.coinsendaServices.countryValidators();case 11:return i=e.sent,e.next=14,Object(j.serveKycData)(i.res.levels.level_1.personal[s.person_type]);case 14:return o=e.sent,e.next=17,Object(j.converToInitState)(i.res.levels.level_1.personal[s.person_type]);case 17:return l=e.sent,e.next=20,a.props.coinsendaServices.getCountryList();case 20:return u=e.sent,e.next=23,Object(j.extractSelectList)(o,i.res.levels.level_1.personal[s.person_type]);case 23:return p=e.sent,e.next=26,Object(j.FormatCountryList)(p.country,u);case 26:return p.country=e.sent,p.countries=u,e.next=30,a.setState({kyc_data_basic:o,select_list:p});case 30:return e.next=32,a.matchList({value:"colombia",name:"country_prefix"});case 32:return m=e.sent,(d=Object(c.a)({},l,{country_prefix:""},t.data_state)).country_prefix||(d.country_prefix=m),d.country||(d.country=m),f=o[a.props.step-1],e.next=39,a.setState({data_state:d,message:f.message,active:!1,colorMessage:"#50667a",ui_type:f.ui_type,open_sect:!1,show_hide_section:!1,current_item:f.name});case 39:a.props.action.isAppLoading(!1);case 40:case"end":return e.stop()}},e)})),a.update=function(){var e=Object(s.a)(r.a.mark(function e(t){var n,s,i,o,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.target).preventDefault&&n.preventDefault(),n.persist&&n.persist(),s=n.name,i=n.value,o=a.state.ui_type,s!==C.name.name&&s!==C.surname.name){e.next=8;break}if(!i||/(^[\xf1\xd1\xe1\xc1\xe9\xc9\xed\xcd\xf3\xd3\xfa\xdaA]?|^\b)(?!.*?\s{2})[\xf1\xd1\xe1\xc1\xe9\xc9\xed\xcd\xf3\xd3\xfa\xdaA-Za-z ]{1,25}(\s?)$/g.test(i)){e.next=8;break}return e.abrupt("return");case 8:if(s!==C.phone.name){e.next=11;break}if(!i||/^[0-9]{1,14}$/g.test(i)){e.next=11;break}return e.abrupt("return");case 11:if(s!==C.address.name){e.next=14;break}if(!(i&&i.length>150)){e.next=14;break}return e.abrupt("return");case 14:if(s!==C.city){e.next=17;break}if(!(i&&i.length>100)){e.next=17;break}return e.abrupt("return");case 17:if(s!==C.id_number.name){e.next=26;break}if("pasaporte"!==a.state.data_state.id_type[0].code){e.next=24;break}if(!i||/^[a-zA-Z0-9]{1,20}$/g.test(i)){e.next=22;break}return e.abrupt("return");case 22:e.next=26;break;case 24:if(!i||/^[0-9]{1,12}$/g.test(i)){e.next=26;break}return e.abrupt("return");case 26:if("country_prefix"!==s&&"country"!==s&&"select"!==o){e.next=34;break}return e.next=29,a.matchList(n);case 29:if(!(l=e.sent)){e.next=34;break}return console.log("||||||||||||||| Update Function: ",l,a.state.data_state),a.setState({data_state:Object(c.a)({},a.state.data_state,Object(u.a)({},s,l))}),e.abrupt("return",setTimeout(function(){a.setState({open_sect:!1})},300));case 34:return e.next=36,a.setState({data_state:Object(c.a)({},a.state.data_state,Object(u.a)({},s,i?Object(j.capitalizeString)(i):""))});case 36:a.validateActive();case 37:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.matchList=function(){var e=Object(s.a)(r.a.mark(function e(t){var n,c,s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,c=t.name,n||a.setState({current_search:null}),s=a.state.select_list,e.next=5,Object(j.matchItem)(s["country_prefix"===c||"nationality"===c?"countries":c],{primary:n},"code");case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",!1);case 8:if(i.length<50&&a.setState({current_search:i}),1!==i.length){e.next=11;break}return e.abrupt("return",i);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.validateActive=Object(s.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.objectToArray)(a.state.data_state);case 2:if(t=e.sent,n=a.props.step,!t[n-1]){e.next=6;break}return e.abrupt("return",a.setState({active:!0}));case 6:return e.abrupt("return",a.unAvailableActive());case 7:case"end":return e.stop()}},e)})),a.unAvailableActive=function(){return a.setState({active:!1})},a.siguiente=Object(s.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.kyc_data_basic,!(a.props.step<=t.length)){e.next=10;break}return e.next=4,a.props.action.UpdateForm("kyc_basic",a.state);case 4:return e.next=6,a.props.action.IncreaseStep("kyc_basic");case 6:if(!(a.props.step>t.length)){e.next=8;break}return e.abrupt("return",a.props.validate_personal_kyc("personal"));case 8:return a._onFocus(),e.abrupt("return",a.validateActive());case 10:case"end":return e.stop()}},e)})),a.handleSubmit=function(){var e=Object(s.a)(r.a.mark(function e(t){var n,c,s,i,o,l,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(j.objectToArray)(a.state.data_state);case 3:if(n=e.sent,c=a.props.step,s=n[c-1],i=a.state,o=i.current_item,l=i.data_state,String(s).trim()){e.next=9;break}return e.abrupt("return",a.setState({message:"No se permiten valores vac\xedos",colorMessage:"#ff1100"}));case 9:if(o!==C.birthday.name||!s){e.next=14;break}if(u=v()(s,"DD/MM/YYYY"),u.isBefore(v()().subtract(18,"years"))){e.next=14;break}return e.abrupt("return",a.setState({message:"El registro solo es v\xe1lido para personas mayores de edad",colorMessage:"#ff1100"}));case 14:if("phone"!==o||l.country_prefix){e.next=16;break}return e.abrupt("return",!1);case 16:if(!s){e.next=18;break}return e.abrupt("return",a.siguiente());case 18:return e.abrupt("return",a.setState({message:a.errMessage(c),colorMessage:"#ff1100"}));case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.errMessage=function(e){return a.state.kyc_data_basic[e-1].errmessage},a.receivedProps=function(){var e=Object(s.a)(r.a.mark(function e(t){var n,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.kyc_data_basic&&a.state.kyc_data_basic[t.step-1]){e.next=2;break}return e.abrupt("return",!1);case 2:if(!(t.step>a.state.kyc_data_basic.length)){e.next=4;break}return e.abrupt("return",!1);case 4:return n=a.state.kyc_data_basic[t.step-1].name,e.next=7,n;case 7:if(e.t0=e.sent,"phone"!==e.t0){e.next=12;break}e.t1=a.state.data_state.country_prefix,e.next=13;break;case 12:e.t1="country"===n?a.state.data_state[n]:null;case 13:return c=e.t1,e.next=16,a.setState({message:"".concat(a.state.open_sect?"":a.state.kyc_data_basic[t.step-1].message),colorMessage:"#50667a",ui_type:a.state.kyc_data_basic[t.step-1].ui_type,current_item:n,current_search:c||null});case 16:a.validateActive();case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.toggleSection=function(){a.setState({message:"".concat(a.state.open_sect?a.state.kyc_data_basic[a.props.step-1].message:""),open_sect:!a.state.open_sect,show_hide_section:!a.state.show_hide_section})},a._onFocus=function(){var e=a.state,t=e.open_sect,n=e.ui_type,r=e.kyc_data_basic,c=a.props.step,s=Array.isArray(a.state.data_state[r[c-1].name]);if("select"===n&&!s)return setTimeout(function(){a.setState({show_hide_section:!0})},300),a.setState({message:"".concat(t?r[c-1].message:""),open_sect:!0})},a.clean_search_result=Object(s.a)(r.a.mark(function e(){var t,n,s,i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.ui_type,s=t.data_state,"phone"===(i=t.current_item)&&(o="country_prefix"),e.next=4,a.setState({data_state:Object(c.a)({},s,Object(u.a)({},o||i,null)),current_search:null});case 4:"select"===n&&a.setState({open_sect:!0,show_hide_section:!0});case 5:case"end":return e.stop()}},e)})),a.select_item=function(){var e=Object(s.a)(r.a.mark(function e(t){var n,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.current_item,c={target:{name:n,value:t.code}},"phone"===n&&(c.target.name="country_prefix"),e.next=5,a.update(c);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init_component();case 2:this.props.history.push("?form=personal_names"),document.onkeydown=function(e){13===e.keyCode&&(e.preventDefault(),t.handleSubmit(e))};case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){document.onkeydown=!1}},{key:"componentDidUpdate",value:function(e,t){var a,n=this;e.step!==this.props.step&&(1===this.props.step&&(a="?form=personal_names"),2===this.props.step&&(a="?form=personal_surnames"),3===this.props.step&&(a="?form=personal_birthday"),4===this.props.step&&(a="?form=personal_phone"),5===this.props.step&&(a="?form=personal_address"),6===this.props.step&&(a="?form=personal_residence_city"),7===this.props.step&&(a="?form=personal_country"),8===this.props.step&&(a="?form=personal_type_id"),9===this.props.step&&(a="?form=personal_number_id"),10===this.props.step&&(a="?form=personal_nacionality"),11===this.props.step&&(a="?form=personal_success"),this.props.history.push(a),10!==this.props.step||!this.state.data_state.id_type||"cedula_ciudadania"!==this.state.data_state.id_type[0].code&&"cedula_extranjeria"!==this.state.data_state.id_type[0].code||function(){var e=Object(s.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({data_state:Object(c.a)({},n.state.data_state,{nationality:n.state.data_state.country})});case 2:n.siguiente();case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()())}},{key:"componentWillReceiveProps",value:function(e){e.step!==this.props.step&&this.setState({open_sect:!1,show_hide_section:!1}),this.receivedProps(e)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"render",value:function(){var e=this,t=this.state,a=t.open_sect,n=t.data_state,r=t.ui_type,s=t.current_item,i=t.current_search,o=t.kyc_data_basic,u=t.show_hide_section,p=this.props.step;return a=a&&"text"!==r,l.a.createElement(l.a.Fragment,null,this.props.loader||!o||!p||this.props.step>this.state.kyc_data_basic.length?l.a.createElement(N.a,null):l.a.createElement("div",{className:"KycLayout"},l.a.createElement("p",{className:"fuente KycTitle KycTitless"},"Verificaci\xf3n B\xe1sica"),l.a.createElement(y,{update:this.update,handleSubmit:this.handleSubmit,kyc:o,step:this.props.step,state:Object(c.a)({},this.state,{open_sect:a}),toggleSection:this.toggleSection,_onFocus:this._onFocus,search_results:"phone"===r?n.country_prefix?n.country_prefix:null:"select"===r&&n[o[p-1].name]?n[o[p-1].name]:null,clean_search_result:this.clean_search_result}),l.a.createElement("div",{id:"expandibleKycPanel",className:"expandibleKycPanel",style:{height:a?"65vh":"0",opacity:a?"1":"0"}},u&&l.a.createElement("div",{className:"contexpandibleKycPanel ".concat(a?"openSec":"")},i&&l.a.createElement("div",{className:"contCountryList"},i.map(function(t){return l.a.createElement(w,{key:t.id,item:t,select_item:e.select_item,active:i&&1===i.length&&!0})})),("select"===r||"phone"===r)&&!i&&l.a.createElement("div",{className:"contCountryList"},this.state.select_list["phone"===s||"nationality"===s?"countries":s].map(function(t){return l.a.createElement(w,{key:t.id,item:t,select_item:e.select_item,suffixText:"id_type"!==e.state.current_item||"cedula_ciudadania"!==t.code&&"cedula_extranjeria"!==t.code?null:e.state.data_state.country&&e.state.data_state.country[0].code})}))))))}}]),t}(o.Component);var L=Object(x.b)(function(e){var t=e.modelData.user;return Object(c.a)({},e.form.form_kyc_basic,{current:e.form.current,form_kyc_basic_state:e.form.form_kyc_basic,user:t,loader:e.isLoading.loader})},function(e){return{action:Object(k.bindActionCreators)(E.a,e)}})(Object(S.a)(I)),A=a(558),D=(a(830),a(618)),F=a(358),K=a(595),P=a.n(K),M=a(592),T=a.n(M),z=a(594),B=a.n(z),U=a(593),R=a.n(U),W=a(596),V=a.n(W),Y=a(440),G=a(351),$=a(352);function q(){var e=Object(G.a)(["\n  overflow: hidden;\n  position: absolute;\n  align-self: center;\n  cursor: pointer;\n  transition: 0.3s;\n  background: white;\n  border-radius: 50%;\n  color: black;\n  opacity: 0.15;\n\n  &:hover {\n    opacity: 1;\n  }\n\n  &.left {\n    left: 15px;\n    transform: rotate(-90deg);\n    &:hover {\n      transform: rotate(-90deg) scale(1.3) !important;\n    }\n    &:active {\n      transition: 0.1s;\n      transform: rotate(-90deg) scale(1) !important;\n    }\n  }\n\n  &.right {\n    right: 15px;\n    transform: rotate(90deg);\n    &:hover {\n      transform: rotate(90deg) scale(1.3) !important;\n    }\n    &:active {\n      transition: 0.1s;\n      transform: rotate(90deg) scale(1) !important;\n    }\n  }\n"]);return q=function(){return e},e}function J(){var e=Object(G.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n"]);return J=function(){return e},e}function Z(){var e=Object(G.a)(["\n  width: 100%;\n  height: 100%;\n  display: grid;\n  align-items: center;\n  justify-items: center;\n  position: relative;\n"]);return Z=function(){return e},e}function H(){var e=Object(G.a)(["\n  height: 100%;\n  display: grid;\n  grid-template-rows: 1fr;\n  transition: 0.3s;\n  transform: ",";\n  width: ",";\n  grid-template-columns: ",";\n"]);return H=function(){return e},e}function X(){var e=Object(G.a)(["\n  height: 100%;\n  width: 100%;\n  position: relative;\n  overflow: hidden;\n  display: grid;\n  grid-template-rows: 1fr;\n  grid-template-columns: 1fr;\n"]);return X=function(){return e},e}var Q=$.b.section(X()),ee=$.b.div(H(),function(e){return 1===e.position?"translateX(0px)":"translateX(-".concat(e.position,"px)")},function(e){return e.width&&"".concat(e.width,"00%")},function(e){return e.width?"repeat(".concat(e.width,", 1fr)"):"repeat(1, 1fr)"}),te=$.b.div(Z()),ae=$.b.div(J()),ne=$.b.div(q()),re=function(e){var t=e.config,a=Object(o.useState)(),n=Object(i.a)(a,2),r=n[0],c=n[1],s=Object(o.useState)(1),u=Object(i.a)(s,2),p=u[0],m=u[1];Object(o.useEffect)(function(){c(document.getElementById("Rj45#_SendaSlider"))},[!r]),Object(o.useEffect)(function(){if(r&&r.childNodes){var e=1,t=!0,a=!1,n=void 0;try{for(var c,s=r.childNodes[Symbol.iterator]();!(t=(c=s.next()).done);t=!0)c.value.classList.add("sendaSlider","slider_".concat(e)),e++}catch(i){a=!0,n=i}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}}},[r]);return l.a.createElement(Q,{onMouseOver:function(){console.log("|||||||||||||||| Over ==>")}},l.a.createElement(ee,{id:"Rj45#_SendaSlider",position:p,width:r&&r.childNodes.length},e.children),r&&t&&t.controls&&l.a.createElement(ce,Object.assign({slider:r,setcurrentPosition:m},e)))},ce=function(e){var t,a,n=e.config,c=n.controls,u=n.autoSwap,p=n.swapInterval,m=e.slider,d=e.setcurrentPosition,f=m.childNodes&&m.childNodes.length,h=c&&c.size||"35px",b=Y.c,v=Object(o.useState)(0),g=Object(i.a)(v,2),y=g[0],_=g[1],x=function(){var e=Object(s.a)(r.a.mark(function e(n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n||clearInterval(a),t=m.clientWidth/m.childNodes.length,y<f-1?(d(t*(y+1)),_(y+1)):_(-1);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k={next:x,prev:function(){var e=Object(s.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(a),t=m.clientWidth/m.childNodes.length,y>0?(d(t*(y-1)),_(y-1)):_(m.childNodes.length);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()};Object(o.useEffect)(function(){return u&&(a=setInterval(function(){clearInterval(a),x(!0)},p||1500)),function(){return clearInterval(a)}},[y]);var E=function(e){if(!m.childNodes||!m.childNodes.length)return!1;var t=e.target.dataset.action;k[t]()};return l.a.createElement(o.Fragment,null,l.a.createElement(ne,{className:"right"},l.a.createElement(te,null,l.a.createElement(ae,{"data-action":"next",onClick:E}),l.a.createElement(b,{size:h}))),l.a.createElement(ne,{className:"left"},l.a.createElement(te,null,l.a.createElement(ae,{"data-action":"prev",onClick:E}),l.a.createElement(b,{size:h}))))},se=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onBoarding,a=e.continuar;return l.a.createElement("div",{className:"SimpleSlider"},l.a.createElement("h1",{className:"TitleSlider fuente"},"La foto DEBE ser:"),l.a.createElement(re,{config:{autoSwap:!0,swapInterval:7e3,controls:{size:"50px"}}},l.a.createElement("div",{className:"SimpleSliderItem"},l.a.createElement("h1",{className:"fuente"},"Plana"),l.a.createElement(D.a,null,l.a.createElement("img",{src:P.a,alt:"",width:"80%"})),l.a.createElement("p",{className:"fuente"},"La fotograf\xeda del documento debe ser recta, no puede tener perspectiva")),l.a.createElement("div",{className:"SimpleSliderItem"},l.a.createElement("h1",{className:"fuente"},"Legible"),l.a.createElement(D.a,null,l.a.createElement("img",{src:T.a,alt:"",width:"80%"})),l.a.createElement("p",{className:"fuente"},"Aseg\xfarese, que la identificaci\xf3n este totalmente visible y enfocada, incluidos su nombre completo, fecha de nacimiento y n\xfamero de identificaci\xf3n.")),l.a.createElement("div",{className:"SimpleSliderItem"},l.a.createElement("h1",{className:"fuente"},"Iluminada"),l.a.createElement(D.a,null,l.a.createElement("img",{src:B.a,alt:"",width:"80%"})),l.a.createElement("p",{className:"fuente"},"La imagen no debe estar oscura, procure tomarla con iluminaci\xf3n natural")),l.a.createElement("div",{className:"SimpleSliderItem"},l.a.createElement("h1",{className:"fuente"},"A color"),l.a.createElement(D.a,null,l.a.createElement("img",{src:R.a,alt:"",width:"80%"})),l.a.createElement("p",{className:"fuente"},"La imagen no debe estar a blanco y negro")),l.a.createElement("div",{className:"SimpleSliderItem"},l.a.createElement("h1",{className:"fuente"},"Entera"),l.a.createElement(D.a,null,l.a.createElement("img",{src:V.a,alt:"",width:"100%"})),l.a.createElement("p",{className:"fuente"},"Aseg\xfarese, que las 4 esquinas del documento se vean completamente en el marco de la foto"))),t&&l.a.createElement("div",{className:"holi"},l.a.createElement(F.b,{active:!0,type:"primary",siguiente:a},"Continuar")))}}]),t}(o.Component),ie=a(395),oe=a(356),le=a(508),ue=(a(535),function(e){var t=e.dashboard,a=e.fileloader,n=e.onBoarding,r=e.continuar,c=e.topOnBoarding,s=e.loader,i=e.step,o=e.kyc_success,u=e.finish;return l.a.createElement("div",{className:"KycAvancedLayout"},o?l.a.createElement(le.a,Object.assign({},e,{confetti:!0,cta_secondary:!1,title:"!Lo has hecho muy bien!, tus documentos han sido enviados exitosamente y nuestro sistema se encuentra verific\xe1ndolos.",classes:"long_msg",cta_primary_text:"Finalizar",siguiente:u,user_name:e.user.name})):l.a.createElement("div",{className:"containerKycAvanced ".concat(t&&i<5?"desktop":""),style:{top:"".concat(c,"vh")}},i<5&&window.innerWidth>768&&l.a.createElement("div",{className:"KYCAstep KycOnboarding"},l.a.createElement(se,{onBoarding:n,continuar:r})),l.a.createElement("div",{className:"KYCAstep KycDashboard"},l.a.createElement("div",{className:"KycprogressBar"},l.a.createElement("div",{className:"kycPropgressed",style:{width:1===i?"0%":2===i?"33%":3===i?"66%":"100%"}})),s&&l.a.createElement("div",{className:"auxDesma"},l.a.createElement(oe.default,{label:"cargando"})),l.a.createElement("div",{className:"KycDashContainer ".concat(a?"fileloader":"")},l.a.createElement(A.default,e),l.a.createElement("div",{className:"ssoa"},l.a.createElement(ie.a,e))))))}),pe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={kyc_success:!1,front:"pasaporte"===a.props.user.id_type?"./docs/front_passport.png":"./docs/front.png",back:"./docs/back.png",selfie:"pasaporte"===a.props.user.id_type?"./docs/selfie_passport.png":"./docs/selfie.png",newfront:"pasaporte"===a.props.user.id_type?"./docs/front_passport.png":"./docs/front.png",newback:"./docs/back.png",newselfie:"pasaporte"===a.props.user.id_type?"./docs/selfie_passport.png":"./docs/selfie.png",id_type:a.props.user.id_type,dashboard:window.innerWidth>768,fileloader:!1,prevState:a.props.step,animation:!1,animation2:!1,onBoarding:!(window.innerWidth>768),topOnBoarding:0,imageSrc:null,base64:Object(c.a)({},a.props.base64)},a.goFileLoader=function(){var e=Object(s.a)(r.a.mark(function e(t){var n,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files&&t.target.files.length>0)){e.next=10;break}return a.props.action.isAppLoading(!0),e.next=4,Object(j.img_compressor)(t.target.files[0]);case 4:return n=e.sent,e.next=7,Object(j.readFile)(n);case 7:c=e.sent,a.props.action.isAppLoading(!1),a.setState({imageSrc:c,fileloader:!a.state.fileloader});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.subirImg=function(e){a.props.action.isAppLoading(!0);var t=e.urlImg,n=e.base64;setTimeout(function(){a.props.action.isAppLoading(!1),a.setState({fileloader:!a.state.fileloader}),a.updateLocalImg(t,n),a.props.toastMessage("\xa1Imagen cargada con \xe9xito!","success")},2e3)},a.updateLocalImg=function(){var e=Object(s.a)(r.a.mark(function e(t,n){var s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=1===a.props.step?"newfront":2===a.props.step?"newback":"newselfie",e.next=3,a.setState((s={},Object(u.a)(s,i,t),Object(u.a)(s,"base64",Object(c.a)({},a.state.base64,Object(u.a)({},i,n))),Object(u.a)(s,"imageSrc",null),s));case 3:return e.next=5,a.props.action.UpdateForm("kyc_avanced",a.state);case 5:if(!(a.props.step<=3)){e.next=7;break}return e.abrupt("return",setTimeout(function(){a.stepChange()},700));case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.cancelarSubidaImg=function(){a.setState({fileloader:!1})},a.continuar=function(){a.setState({topOnBoarding:-100})},a.stepChange=Object(s.a)(r.a.mark(function e(){var t,n,c,s,i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("pasaporte"!==a.props.user.id_type||1!==a.props.step){e.next=3;break}return a.setState({prevState:3}),e.abrupt("return",a.props.action.IncreaseStep("kyc_avanced",3));case 3:return t=a.props.step,e.next=6,a.props.action.IncreaseStep("kyc_avanced");case 6:if((n=a.props.step)!==t){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,a.setState({animation:!1});case 11:if(!(n<3)){e.next=15;break}return setTimeout(function(){a.setState({animation:!0})},1),setTimeout(function(){a.setState({animation2:!0})},300),e.abrupt("return",setTimeout(function(){a.setState({prevState:n})},500));case 15:if(a.setState({prevState:n}),c=a.state.base64,s=c.newfront,i=c.newback,o=c.newselfie,!(s&&i&&o||s&&o&&"pasaporte"===a.props.user.id_type)){e.next=29;break}return e.next=21,a.props.validate_identity_kyc(a.state);case 21:if(!e.sent){e.next=26;break}return e.abrupt("return",a.setState({kyc_success:!0}));case 26:return e.next=28,a.setState({base64:{newfront:null,newback:null,newselfie:null}});case 28:a.props.action.UpdateForm("kyc_avanced",a.state);case 29:case"end":return e.stop()}},e)})),a.finish=function(){a.props.action.toggleModal()},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.action.CurrentForm("kyc_advance");case 2:"kyc_advance"===this.props.current&&(this.props.action.isAppLoading(!1),this.props.history.push("?form=identity_front_upload"));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){document.onkeydown=!1}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(e.step!==this.props.step||"kyc_advance"!==this.props.current){var n,r=this.props,c=r.reset,s=r.step;c&&this.setState({animation:!1,animation2:!1,prevState:1}),2===s&&(setTimeout(function(){a.setState({animation:!0})},1),setTimeout(function(){a.setState({animation2:!0})},300)),this.props.user!==e.user&&this.setState({front:"pasaporte"===this.props.user.id_type?"./docs/front_passport.png":"./docs/front.png",selfie:"pasaporte"===this.props.user.id_type?"./docs/selfie_passport.png":"./docs/selfie.png",newfront:"pasaporte"===this.props.user.id_type?"./docs/front_passport.png":"./docs/front.png",newselfie:"pasaporte"===this.props.user.id_type?"./docs/selfie_passport.png":"./docs/selfie.png",id_type:this.props.user.id_type}),2===this.props.step&&(n="?form=identity_back_upload"),3===this.props.step&&(n="?form=identity_selfie_upload"),4===this.props.step&&(n="?form=identity_files_uploaded_success"),this.props.history.push(n)}}},{key:"render",value:function(){return l.a.createElement(ue,Object.assign({stepChange:this.stepChange,goFileLoader:this.goFileLoader,continuar:this.continuar,subirImg:this.subirImg,cancelarSubidaImg:this.cancelarSubidaImg,finish:this.finish},this.state,this.props))}}]),t}(o.Component);var me=Object(x.b)(function(e,t){var a=e.modelData.user,n=e.form.current;return{loader:e.isLoading.loader,step:e.form.form_kyc_avanced.step,base64:e.form.form_kyc_avanced.base64,user:a,current:n}},function(e){return{action:Object(k.bindActionCreators)(E.a,e)}})(Object(S.a)(pe)),de=a(65),fe=a(598),he=a.n(fe),be=a(597),ve=a.n(be),ge=a(4),ye=Object(de.a)(function(){return Promise.resolve().then(a.bind(null,355))}),_e=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={current_name:null,current_value:null,data_state:{},imageSrc:null,open_sect:null,kyc_financial_list:[],widthBar:"0%",availableCta:!1},a.init_component=Object(s.a)(r.a.mark(function e(){var t,n,c,s,i,o,l,u,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.action.isAppLoading(!0),t=a.props,n=t.user,c=t.step,e.next=4,a.props.coinsendaServices.countryValidators();case 4:if(s=e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:return i=s.res.levels.level_2.financial,o=i[n.person_type],e.next=11,Object(j.addIndexToRootObject)(o);case 11:return l=e.sent,e.next=14,Object(j.converToInitState)(l);case 14:return u=e.sent,e.next=17,Object(j.objectToArray)(l,!0);case 17:return p=e.sent,e.next=20,a.setState({current_name:p[c-1].ui_name,current_value:p[c-1].value,data_state:u,kyc_financial_list:p});case 20:a.props.action.isAppLoading(!1);case 21:case"end":return e.stop()}},e)})),a.goFileLoader=function(){var e=Object(s.a)(r.a.mark(function e(t){var n,s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files&&t.target.files.length>0)){e.next=11;break}return n={name:t.target.files[0].name,type:t.target.files[0].type},e.next=4,Object(j.img_compressor)(t.target.files[0]);case 4:return s=e.sent,e.next=7,Object(j.readFile)(s);case 7:return i=e.sent,n.base64=i,e.next=11,a.setState({data_state:Object(c.a)({},a.state.data_state,Object(u.a)({},a.state.current_value,n)),widthBar:"100%",availableCta:!0});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.send_files=Object(s.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.data_state,a.props.action.isAppLoading(!0),n={},e.next=5,Object.keys(t).forEach(function(e){n=Object(c.a)({},n,Object(u.a)({},e,t[e].base64))});case 5:a.props.validate_financial_kyc(n,a.setState);case 6:case"end":return e.stop()}},e)})),a.finish=function(){a.props.action.toggleModal(!1)},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.init_component()}},{key:"render",value:function(){var e=this.state,t=e.current_name,a=e.data_state,n=e.kyc_financial_list,r=e.widthBar,c=e.availableCta,s=this.props,i=s.loader,u=s.financial_success;return l.a.createElement(o.Fragment,null,u?l.a.createElement(le.a,Object.assign({},this.props,{name:this.props.user.name,confetti:!0,cta_secondary:!1,title:"!Lo has hecho muy bien!, tus documentos han sido enviados exitosamente, los analizaremos y te pondremos al tanto de novedades lo m\xe1s pronto posible.",classes:"long_msg",cta_primary_text:"Finalizar",siguiente:this.finish,user_name:this.props.user.name})):l.a.createElement("div",{className:"KycFinancialComponent"},l.a.createElement(ye,{icon:"kyc_financial",color:"#0066AA",size:50}),l.a.createElement("p",{className:"fuente"},"Completa la verificaci\xf3n financiera para operar con cantidades superiores a $7.000 dolares al mes."),l.a.createElement("div",{className:"panelImgFinancial"},i&&l.a.createElement("div",{className:"loaderFinancial"},l.a.createElement("div",{className:"loaderFinancial_cont"},l.a.createElement(oe.default,{label:"Cargando..."}))),l.a.createElement("div",{className:"FinancialUploadImg",style:{width:"calc(100% - 40px)"}},l.a.createElement("div",{className:"KycprogressBar financial loader"},l.a.createElement("div",{className:"kycPropgressed",style:{width:r}})),l.a.createElement("div",{className:"loaderImgComponent",style:{opacity:c?".4":"1"}},l.a.createElement("input",{type:"file",id:"uploadIMGF",accept:ge.a.join(),onChange:this.goFileLoader}),l.a.createElement("div",{className:"payloadFinancial"},l.a.createElement(ye,{icon:"upload",size:70,color:"#3e87d9"}),l.a.createElement("div",{className:"fuente textFinancial"},"Toca para cargar el archivo .JPG/.PNG/.PDF de tu"," ",t)))),l.a.createElement("div",{className:"FinancialUploaded",style:{width:"250px"}},n.length>0&&n.map(function(e){return l.a.createElement("div",{key:e.id,className:"item_loaded",style:{opacity:a[e.value]?"1":"0.4"}},l.a.createElement("div",{className:"contIconS"},a[e.value]?l.a.createElement(ye,{icon:"success",size:100,color:"white"}):l.a.createElement(ye,{icon:"upload",size:70,color:"white"})),l.a.createElement("div",null,l.a.createElement("p",{className:"item_loaded_text fuente"},e.ui_name),l.a.createElement("p",{className:"item_loaded_text fileName fuente2"},a[e.value]?a[e.value].name:"...")),a[e.value]&&l.a.createElement("img",{src:"image/jpeg"===a[e.value].type||"image/png"===a[e.value].type?he.a:ve.a,alt:"",width:"30px"}))}))),l.a.createElement("div",{className:"Kyccontrols"},l.a.createElement("div",{className:"Kcontrols"},l.a.createElement(F.b,{active:c,type:"primary",siguiente:this.send_files},"\xa1Enviar!")))))}}]),t}(o.Component);var xe=Object(x.b)(function(e,t){var a=e.modelData.user;return{step:e.form.form_kyc_financial.step,loader:e.isLoading.loader,user:a}},function(e){return{action:Object(k.bindActionCreators)(E.a,e)}})(Object(S.a)(_e)),ke=function(e){var t=e.globalStep,a=e.validate_personal_kyc,n=e.validate_financial_kyc,r=e.identity_success,c=e.showSuccess;return l.a.createElement("section",{className:"KycLayoutMom"},l.a.createElement("div",{className:"KycLayoutCarousel ".concat(0===t?"globalStep0":1===t?"globalStep1":"globalStep2"),style:{display:t<3?"grid":"none"}},"accepted"!==e.user.security_center.kyc.basic&&"confirmed"!==e.user.security_center.kyc.basic?l.a.createElement(L,Object.assign({validate_personal_kyc:a},e)):l.a.createElement("div",null),c?l.a.createElement(le.a,Object.assign({},e,{title:"Has completado de forma exitosa el proceso de verificaci\xf3n b\xe1sica",cta_text:"\xbfQuieres continuar con el proceso de verifiaci\xf3n avanzada?",confetti:0===t||1===t,cta_secondary:!0,cta_primary_text:"Continuar verificaci\xf3n",user_name:e.user.name})):l.a.createElement("div",null),l.a.createElement("div",{className:"KycLayout"},!r&&l.a.createElement("p",{className:"fuente KycTitle"},"Verificaci\xf3n Avanzada"),2===t&&l.a.createElement(me,e))),3===t&&l.a.createElement("div",{className:"KycLayout",style:{display:t>2?"grid":"none"}},l.a.createElement("p",{className:"fuente KycTitle financial"},"Verificaci\xf3n Financiera"),l.a.createElement(xe,Object.assign({},e,{validate_financial_kyc:n}))))},Ee=a(362);t.default=Object(x.b)(function(e,t){var a=e.modelData.user,n=e.form.current;return{loader:e.isLoading.loader,globalStep:e.form.globalStep,user:a,form_kyc_basic:e.form.form_kyc_basic,current:n}},function(e){return{action:Object(k.bindActionCreators)(E.a,e)}})(Object(S.a)(function(e){var t=Object(o.useState)(),a=Object(i.a)(t,2),n=a[0],u=a[1],p=Object(o.useState)(),m=Object(i.a)(p,2),d=m[0],f=m[1],h=Object(o.useState)(!1),b=Object(i.a)(h,2),v=b[0],g=b[1],y=Object(Ee.a)(),_=Object(i.a)(y,1)[0],x=Object(o.useState)(!1),k=Object(i.a)(x,2),E=k[0],j=k[1],O=function(){var t=Object(s.a)(r.a.mark(function t(){var a,n,s,i,o,l,u,p;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.form_kyc_basic,n=e.user,s=a.data_state,i={info:{name:s.name,surname:s.surname,birthday:s.birthday,address:s.address,phone:"+".concat(s.country_prefix[0].prefix[0]).concat(s.phone),city:s.city,country:s.country[0].code,id_type:s.id_type[0].code,id_number:s.id_number,nationality:s.nationality[0].code},info_type:"personal",verification_level:"level_1"},e.action.isAppLoading(!0),t.next=6,e.coinsendaServices.updateLevelProfile(i,n);case 6:if(o=t.sent){t.next=13;break}return t.next=10,e.action.ReduceStep("kyc_basic",1);case 10:return e.action.isAppLoading(!1),_("No puedes verificarte en este momento, intenta m\xe1s tarde","error"),t.abrupt("return",e.action.ReduceStep("kyc_global_step",1));case 13:return l=o.data,u=l.personal,p=Object(c.a)({},n,u,{levels:Object(c.a)({},n.levels,{personal:"confirmed"}),security_center:Object(c.a)({},n.security_center,{kyc:Object(c.a)({},n.security_center.kyc,{basic:"confirmed"})}),country:n.country}),t.next=18,e.coinsendaServices.updateUser(p);case 18:e.action.IncreaseStep("kyc_global_step"),e.action.success_sound(),e.action.isAppLoading(!1),j(!0);case 22:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(s.a)(r.a.mark(function t(a){var n,s,i,o,l,p,m;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.base64,s=e.user,i=n.newselfie,o=n.newfront,l=n.newback,p={info:{selfie:i,id_front:o,id_back:"pasaporte"===s.id_type?o:l},info_type:"identity",verification_level:"level_1"},e.action.isAppLoading(!0),t.next=7,e.coinsendaServices.updateLevelProfile(p,s);case 7:if(t.sent){t.next=15;break}return t.next=11,e.action.ReduceStep("kyc_avanced",1);case 11:return t.next=13,u(!0);case 13:return e.action.isAppLoading(!1),t.abrupt("return",_("No puedes verificarte en este momento, intenta m\xe1s tarde","error"));case 15:return m=Object(c.a)({},s,{levels:Object(c.a)({},s.levels,{identity:"confirmed"}),security_center:Object(c.a)({},s.security_center,{kyc:Object(c.a)({},s.security_center.kyc,{advanced:"confirmed"})})}),t.next=18,e.coinsendaServices.updateUser(m);case 18:return e.action.isAppLoading(!1),g(!0),j(!0),t.abrupt("return",!0);case 22:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Object(s.a)(r.a.mark(function t(a){var n,s,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.user,s={info:a,info_type:"financial",verification_level:"level_2"},t.next=4,e.coinsendaServices.updateLevelProfile(s,n);case 4:if(t.sent){t.next=8;break}return e.action.isAppLoading(!1),t.abrupt("return",_("No puedes verificarte en este momento, intenta m\xe1s tarde","error"));case 8:return e.action.success_sound(),f(!0),i=Object(c.a)({},n,{levels:Object(c.a)({},n.levels,{financial:"confirmed"}),security_center:Object(c.a)({},n.security_center,{kyc:Object(c.a)({},n.security_center.kyc,{financial:"confirmed"})})}),t.next=13,e.coinsendaServices.updateUser(i);case 13:e.action.isAppLoading(!1),j(!0);case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return l.a.createElement(ke,Object.assign({validate_personal_kyc:O,validate_identity_kyc:w,validate_financial_kyc:S,siguiente:function(){e.action.IncreaseStep("kyc_global_step"),j(!1)},showSuccess:E,exit:function(){e.action.toggleModal(!1),j(!1)}},e,{reset:n,financial_success:d,identity_success:v}))}))}}]);
//# sourceMappingURL=28.92524298.chunk.js.map