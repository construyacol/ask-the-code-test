(this["webpackJsonpcoinsenda-app"]=this["webpackJsonpcoinsenda-app"]||[]).push([[46],{341:function(e,t,c){"use strict";c.d(t,"a",(function(){return s})),c.d(t,"b",(function(){return i}));var n=c(2),a=c(98);const o={modalRestriction:!0,prev:37,next:39,default:0,originalLength:!1};function s(e){const t={...o,...e},{modalRestriction:c,uniqueIdForElement:s,loader:i,items:l}=t,[d,r]=Object(n.useState)(-1);let u=c&&Object(a.d)((e=>e.form.isModalVisible)),j=c&&Object(a.d)((e=>e.ui.modal.render));Object(n.useEffect)((()=>{if(l&&l.length>0&&!i){if(u)return;const e=document.getElementById("".concat(s).concat(t.default));e&&e.focus()}}),[l,i]),Object(n.useEffect)((()=>{c&&(j||u)&&r(-1)}),[j,u]),Object(n.useEffect)((()=>window.innerWidth<900?(window.KEY_CODES_META=null,window.onkeydown=null,window.onkeyup=null,window.onkeypress=null,()=>null):(window.onkeydown=e=>{if(!j&&!u&&l&&l.length>0){if(u)return;const c=t.originalLength?l.length:l.length-1,n=d<0;let a=0,o=null;e.keyCode===t.prev&&(a=n?c:d-1,o=document.getElementById("".concat(s).concat(Math.max(0,a)))),e.keyCode===t.next&&(a=n?0:d+1,o=document.getElementById("".concat(s).concat(Math.min(c,a)))),13===e.keyCode&&(a=n?0:d,o=document.getElementById("".concat(s).concat(Math.min(c,a)))),o&&o.focus()}},()=>{window.onkeydown=!1})),[window.onkeydown,u,l,i,j,d]);return[e=>{d!==e&&r(e)}]}function i(e,t){let c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{suprKeyAction:o,enterKeyAction:s}=t,[i,l]=Object(n.useState)(!1),d=c&&Object(a.d)((e=>e.form.isModalVisible)),r=c&&Object(a.d)((e=>e.ui.modal.render));Object(n.useEffect)((()=>{if(window.innerWidth<900)return window.KEY_CODES_META=null,window.onkeydown=null,window.onkeyup=null,window.onkeypress=null,()=>null;{const t=document.getElementById(e.focusedId);t&&(t.onfocus=()=>{l(!0),e.setCurrentSelection(e.number)},t.onblur=()=>{l(!1)},t.onkeydown=e=>{t.blur(),d||r||(46===e.keyCode&&(e.stopPropagation(),o((()=>t.focus()))),13===e.keyCode&&(s(),e.stopPropagation(),e.preventDefault()))})}}),[d,e.uniqid]);const u=()=>{const t=document.getElementById(e.focusedId);t&&t.focus()};return[i,u]}},403:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),o=c(53),s=c(98),i=c(333),l=c(332),d=c(341),r=c(27),u=c(99),j=c(69),b=c(71),m=(c(407),c(14));const h=e=>{let{balance:t,currency:c,currency_type:a}=e;const[o,s]=Object(n.useState)("0"),[i,l]=Object(n.useState)(""),[d,r]=Object(n.useState)(""),u=Object(n.useRef)(t);Object(n.useEffect)((()=>{u.current=t;let e=Object(j.c)(t.available,c);s(e.toFormat())}),[]),Object(n.useEffect)((()=>{t&&u.current&&JSON.stringify(t)!==JSON.stringify(u.current)&&(u.current=t,h(t))}),[t]);const h=async e=>{const{lastAction:t,actionAmount:n,available:a}=e;if(n){const e=Object(j.c)(n,c);await p("Out"),l(t),s(e.toFormat()),await p("In")}n&&await Object(b.a)(500),n&&await p("Out");const o=Object(j.c)(a,c);l(""),s(o.toFormat()),n&&await p("In")},p=async e=>{r(e),await Object(b.a)(250)};return Object(m.jsxs)("div",{className:"BalanceComponent wallet",children:[Object(m.jsx)("p",{className:"fuente title balanceTitle",children:"Balance "}),Object(m.jsx)("div",{className:"displayCont itt ".concat(d),children:Object(m.jsxs)("p",{className:"textin fuente2 ".concat(i),children:["reduce"===i?"-":"add"===i?"+":"","fiat"===a?"$".concat(o):o]})})]})};var p=Object(s.b)((function(e,t){const{balances:c,user:n}=e.modelData,{account_id:a}=t;return{balance:c&&c[a],user:n,currency_type:e.modelData.wallets[a].currency_type,currency:e.modelData.wallets[a].currency}}),(function(e){return{action:Object(r.bindActionCreators)(u.a,e)}}))(a.a.memo(h)),O=c(405),w=c(15),f=c(358),y=c(355),x=c(338),_=c(337);c(408);const v=Object(o.a)((()=>Promise.resolve().then(c.bind(null,331))));t.default=Object(s.b)(((e,t)=>{const{account:c}=t,{balances:n,wallets:a}=e.modelData,{currentFilter:o}=e.ui.current_section.params;return{currentFilter:o,balances:n&&c&&n[c.id],specifiedWallet:c&&a[t.account.id]}}))(Object(y.h)((e=>{var t,c;const[a]=Object(i.a)(),o=Object(_.a)(),[s]=Object(x.a)(),[l,r]=Object(n.useState)(),[u,j]=Object(n.useState)(),[b,h]=Object(n.useState)(!1),[p,O]=Object(n.useState)(""),{account_type:w}=e;Object(n.useEffect)((()=>{var t;h(p===(null===e||void 0===e||null===(t=e.account)||void 0===t?void 0:t.id)&&l)}),[l,null===e||void 0===e||null===(t=e.account)||void 0===t?void 0:t.id]);const y=t=>{"wallets"!==e.account_type&&(o.confirmationModalToggle(),o.confirmationModalPayload({title:"Esto es importante, estas a punto de...",description:"Eliminar una cuenta, una vez hecho esto, no podr\xe1s recuperar los datos asociados a esta.",txtPrimary:"Eliminar",txtSecondary:"Cancelar",action:A,img:"deletewallet",cancelCallback:t}))},[v]=Object(d.b)({...e,uniqid:null===e||void 0===e||null===(c=e.account)||void 0===c?void 0:c.id},{suprKeyAction:y,enterKeyAction:()=>k(w)});if(e.loader||!e.account)return Object(m.jsx)(N,{});const k=async t=>"wallets"!==t?e.account.used_counter>0?e.history.push("/withdraw_accounts/activity/".concat(e.account.id,"/withdraws")):void 0:"deleting"!==l&&"deleted"!==l?(o.cleanNotificationItem(t,"account_id"),void 0===e.account.count?(async()=>{j(!0);const t=await a.countOfAccountTransactions(e.account.id),{count:c}=t;if(await o.update_item_state({[e.account.id]:{...e.account,count:c}},"wallets"),c<1){let t=await a.getDepositByAccountId(e.account.id);return j(!1),t&&t.length?(o.update_item_state({[e.account.id]:{...e.specifiedWallet,count:1}},"wallets"),e.history.push("/wallets/activity/".concat(e.account.id,"/deposits"))):e.history.push("/wallets/deposit/".concat(e.account.id))}return e.history.push("/wallets/activity/".concat(e.account.id,"/").concat(e.currentFilter?e.currentFilter:"deposits"))})():e.account.count<1?e.history.push("/wallets/deposit/".concat(e.account.id)):e.history.push("/wallets/activity/".concat(e.account.id,"/").concat(e.currentFilter?e.currentFilter:"deposits"))):void 0,A=async()=>{r("deleting"),O(e.account.id);const t="wallets"===e.account_type;if(t){if(e.balances.total>0)return r(""),s("Las cuentas con balance no pueden ser eliminadas","error");let t=await a.getDepositByAccountId(e.account.id,'"state":"confirmed"');if(t&&t.length)return r(""),s("Las cuentas con depositos pendientes no pueden ser eliminadas","error")}let c="Cuenta eliminada con \xe9xito",n=!0,i=!1;if(i=t?await a.deleteWallet(e.account):await a.deleteAccount(e.account.id),404===i||465===i||!i)return c="La cuenta no se ha podido eliminar",n=!1,r(""),s(c,n?"success":"error");r("deleted"),setTimeout((async()=>{t?await a.getWalletsByUser():await a.fetchWithdrawAccounts()}),0),o.exit_sound(),s(c,n?"success":"error")},C={loaderAccount:u,handleAction:k,set_account_state:r,shouldHaveDeleteClassName:b&&"deleted"===l,delete_account:y,account:e.account,balances:e.balances,actions:o,account_type:w,focusedId:e.focusedId,isStatic:e.isStatic,history:e.history},S="wallets"===w;return Object(m.jsxs)(f.b,{className:"AccountLayout  ".concat(b&&l),children:[Object(m.jsx)(f.f,{"aria-label":"itemFromList",name:"itemFromList",autoComplete:"off",id:e.focusedId}),S?Object(m.jsx)(g,{isSelected:v,...C}):Object(m.jsx)(I,{isSelected:v,loaderAccount:u,...C})]})})));const g=e=>{const{account:t,balances:c,delete_account:n,shouldHaveDeleteClassName:a,isSelected:o,actions:s,focusedId:i,isStatic:d}=e,{name:r,id:u,currency:j}=t,b="cop"===t.currency.currency?"bank":"ethereum"===t.currency.currency?"ethereum_account":t.currency.currency;return Object(m.jsxs)(f.h,{id:"hoverable".concat(i),isSelected:o,className:"walletLayout ".concat(e.loaderAccount?"loading":""," ").concat(j.currency," ").concat(a&&"deleted"),wallet:!0,inscribed:!0,children:[e.loaderAccount&&Object(m.jsx)(l.LoaderContainer,{children:Object(m.jsx)(l.default,{loader:2})}),!d&&s&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(A,{handleAction:e.handleAction,payload:e.account_type}),Object(m.jsx)(k,{account_detail:e.handleAction,delete_account:n,...e})]}),Object(m.jsx)("img",{src:"".concat(Object(w.b)("assets"),"wallet_coins/back.webp"),id:"backCard",alt:"",width:"100%",height:"100%"}),Object(m.jsx)("div",{className:"iconWallet",children:Object(m.jsx)(v,{icon:b,size:195})}),Object(m.jsxs)("div",{className:"walletTitleCont IWText",children:[Object(m.jsx)("h1",{className:"IWText fuente tobe_continue",children:r||"Mi cartera crypto"}),Object(m.jsx)(O.default,{notifier:"wallets",item_type:"account_id",id:u,type:"new"})]}),Object(m.jsx)("p",{className:"IWText fuente IWcurrencyText tobe_continue",children:j.currency}),Object(m.jsx)(m.Fragment,{children:c?Object(m.jsx)(p,{account_id:u}):Object(m.jsx)("div",{className:"loadItem",children:Object(m.jsx)(l.default,{color:"white"})})})]})},I=e=>{const{account:t,delete_account:c,shouldHaveDeleteClassName:n,actions:a,isSelected:o,focusedId:s,isStatic:i}=e,{bank_name:d,id:r,account_number:u,inscribed:j,used_counter:b,state:h}=t;return Object(m.jsxs)(f.i,{id:"hoverable".concat(s),isSelected:o,className:"withdrawAccount ".concat(n&&"deleted"),inscribed:"complete"===t.state,children:[!i&&a&&Object(m.jsxs)(m.Fragment,{children:[b>0&&Object(m.jsx)(A,{handleAction:e.handleAction,payload:e.account_type}),Object(m.jsx)(k,{account_detail:e.handleAction,delete_account:c,...e})]}),Object(m.jsx)("img",{src:"".concat(Object(w.b)("assets"),"wallet_coins/back.webp"),id:"backCard",alt:"",width:"100%",height:"100%"}),Object(m.jsx)("div",{className:"iconBank",children:Object(m.jsx)(v,{icon:t.bank_name&&t.bank_name.value,size:100})}),Object(m.jsxs)("h1",{className:"IWText fuente tobe_continue",children:[d.ui_name," ",Object(m.jsx)(O.default,{notifier:"withdraw_accounts",item_type:"account_id",id:r,type:"new"})]}),Object(m.jsxs)("p",{className:"IWText fuente2 IWLittleTitle",children:["No. ",u.value]}),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"contSuscribed",children:["in_progress"===h?Object(m.jsx)("div",{className:"contLoader2",children:Object(m.jsx)(l.default,{color:"white",loader:2})}):"complete"===h&&Object(m.jsx)("i",{className:"far fa-check-circle"}),Object(m.jsx)("p",{className:"IWText fuente IWLittleTitle",children:"pending"===h?"Pendiente":"in_progress"===h?"En proceso":"complete"===h?"Inscrita":"Rechazada"})]}),Object(m.jsxs)("p",{className:"IWText fuente IWLittleTitle",style:{display:j?"flex":"none"},children:["Movimientos: ",b]})]})]})},N=()=>Object(m.jsx)(m.Fragment,{children:["uno","dos","tres"].map(((e,t)=>Object(m.jsxs)(f.h,{className:"loader ".concat(e),children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]},t)))}),k=e=>{const t=t=>{if(t.target.dataset&&t.target.dataset.address)return e.history.push("/wallets/".concat(t.target.dataset.address,"/").concat(e.account.id))},{account_type:c}=e;return console.log("|||||||||||||||||||||| account_type ===========================> ",c),Object(m.jsxs)(f.g,{className:"OptionsLayout ".concat(c),children:[e.account.count?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.d,{account_type:c,onClick:t,"data-address":"withdraw",children:Object(m.jsx)(f.e,{className:"far fa-arrow-alt-circle-up IdeleteButton tooltip","data-address":"withdraw",children:Object(m.jsx)("span",{className:"tooltiptext2 fuente","data-address":"withdraw",children:"Retirar"})})}),Object(m.jsx)(f.d,{account_type:c,onClick:t,"data-address":"deposit",children:Object(m.jsx)(f.e,{className:"far fa-arrow-alt-circle-down Ideposit IdeleteButton tooltip","data-address":"deposit",children:Object(m.jsx)("span",{className:"tooltiptext2 fuente","data-address":"deposit",children:"Depositar"})})})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]}),"wallets"!==c&&Object(m.jsx)(f.d,{className:"retweetCont",account_type:c,onClick:e.delete_account,children:Object(m.jsx)(f.e,{className:"fas fa-trash-alt IdeleteButton tooltip",children:Object(m.jsx)("span",{className:"tooltiptext2 fuente",children:"Borrar"})})})]})},A=e=>Object(m.jsx)(f.a,{onClick:()=>{e.handleAction(e.payload)}})},407:function(e,t,c){},408:function(e,t,c){}}]);
//# sourceMappingURL=46.b1003610.chunk.js.map