(this["webpackJsonpcoinsenda-app"]=this["webpackJsonpcoinsenda-app"]||[]).push([[12,76,78,81,99],{479:function(n,e,t){"use strict";t.r(e),t.d(e,"showButton",(function(){return v})),t.d(e,"Button",(function(){return h})),t.d(e,"showWelcome",(function(){return j})),t.d(e,"hideWelcome",(function(){return x})),t.d(e,"hideStage",(function(){return y})),t.d(e,"showStage",(function(){return O})),t.d(e,"flipInVerRight",(function(){return w})),t.d(e,"tiltInFwdTl",(function(){return S})),t.d(e,"Container",(function(){return k})),t.d(e,"Layout",(function(){return D})),t.d(e,"ContentContainer",(function(){return F})),t.d(e,"Content",(function(){return C}));var a,r,i,o,c,s,l,d,u,p,f,b,g=t(2),m=t(3);const v=Object(m.c)(a||(a=Object(g.a)(["\n    0% {\n      filter: grayscale(1) blur(1px);\n        opacity:.1;\n    }\n    20% {\n      filter: grayscale(1) blur(0px);\n      opacity:.1;\n    }\n    90% {\n      filter: grayscale(1) blur(0px);\n      opacity:.1;\n    }\n   \n    100%{\n      filter: grayscale(0) blur(0px);\n        opacity:1;\n    }\n"]))),h=m.b.button(r||(r=Object(g.a)(["\n  background: #0198ff;\n  font-size: 17px;\n  font-weight: bold;\n  width:270px;\n  height:60px;\n  border-radius:5px;\n  border: none;\n  color: white;\n  cursor:pointer;\n  position:absolute;\n  bottom:40px;\n  opacity:.1;\n  filter: grayscale(1) blur(1px);\n\n  &.showButton{\n    animation: "," .8s linear forwards;\n  }\n\n"])),v),j=Object(m.c)(i||(i=Object(g.a)(["\n    0% {\n        transform: translateY(50px);\n        filter:blur(5px);\n        opacity:0;\n    }\n    50% {\n        transform: translateY(50px);\n        filter:blur(1px);\n        opacity:0;\n    }\n    100%{\n        transform: translateY(0px);\n        filter:blur(0px);\n        opacity:1;\n    }\n"]))),x=Object(m.c)(o||(o=Object(g.a)(["\n    0% {\n        transform: translateY(0px);\n        filter:blur(0px) grayscale(0.2);\n        opacity:1;\n        \n    }\n    60% {\n        transform: translateY(5px);\n        filter:blur(3px) grayscale(1);\n        opacity:1;\n    }\n    100%{\n        transform: translateY(-70px);\n        filter:blur(5px) grayscale(1);\n        opacity:0;\n    }\n"]))),y=Object(m.c)(c||(c=Object(g.a)(["\n    0% {\n        transform: translateY(0px);\n        filter:blur(0px) grayscale(0.2);\n        opacity:1;\n        \n    }\n    100%{\n        transform: translateY(-15px);\n        filter:blur(1px);\n        opacity:0;\n    }\n"]))),O=Object(m.c)(s||(s=Object(g.a)(["\n    0% {\n        transform: translateY(10px);\n        filter:blur(1px);\n        opacity:0;\n    }\n    100%{\n        transform: translateY(0px);\n        filter:blur(0px);\n        opacity:1;\n    }\n"]))),w=Object(m.c)(l||(l=Object(g.a)(["\n  0% {\n    transform: rotateY(80deg);\n    opacity: 0;\n  }\n  100% {\n    transform: rotateY(0);\n    opacity: 1;\n  }\n"]))),S=Object(m.c)(d||(d=Object(g.a)(["\n    0% {\n            transform: rotateY(-65deg) rotateX(35deg) translate(-60px, -60px) skew(45deg, -20deg);\n    opacity: 0;\n  }\n  50%{\n    opacity: 1;\n  }\n  100% {\n            transform: rotateY(0) rotateX(0deg) translate(0, 0) skew(0deg, 0deg);\n    opacity: 1;\n  }\n"]))),k=m.b.div(u||(u=Object(g.a)(["\n    &.show_{\n        animation: "," .5s linear forwards;\n    }\n    &.hide_{\n        animation: "," .5s linear forwards;\n    }\n\n    row-gap: ",";\n\n    perspective: 500px;\n    perspective-origin: calc(50% + 120px) 50%;\n\n    .flip-in-ver-right {\n        animation: "," 0.6s .25s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;\n    \n    }\n    display: grid;\n    align-items: center;\n    justify-items: center;\n    transform: translateY(50px);\n    opacity:0;\n\n    h1, h2{\n        color: var(--paragraph_color);\n        font-size: 30px;\n        margin: 0;\n        font-weight:300;\n    }\n    span{\n        font-size:45px;\n    }\n"])),j,x,(n=>n.rowGap?"".concat(n.rowGap,"px"):0),S),D=m.b.div(p||(p=Object(g.a)(["\n    display: grid;\n    width: 100vw;\n    height: 100vh;\n    background: #ffffffff;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index:1000;\n  @media screen and (max-height: 900px){\n  }\n"]))),F=m.b.div(f||(f=Object(g.a)(["\n  position:relative;\n  width:100vw;\n  height:auto;\n  max-width:800px;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: auto 1fr auto auto auto;\n  height: calc(100vh - 80px);\n  padding: 40px 0;\n"]))),C=m.b.section(b||(b=Object(g.a)(['\n  width:100vw;\n  height:100vh;\n  display:grid;\n  position:relative;\n  align-items:center;\n  justify-items:center;\n  \n  [alt="isoType"]{\n    position: absolute;\n    margin: auto;\n    top: 30px;\n    left: 40px;\n    left: 0px;\n    right:0;\n  }\n'])))},508:function(n,e,t){"use strict";t.r(e);var a,r,i,o,c=t(2),s=t(1),l=t(520),d=t(682),u=t(554),p=t(5),f=t(3),b=t(565),g=t(575),m=t(26),v=t(183),h=t(49),j=t(684),x=t(8),y=t(4),O=t(14),w=t(479),S=t(0);const k="development"===y.r?"/models":"".concat(Object(m.b)("tensor"),"/"),D=Object(p.a)((()=>Promise.resolve().then(t.bind(null,492))));e.default=n=>{var e;let{handleDataForm:t,handleState:a,...r}=n;const i=Object(x.d)((n=>n.modelData)),{dataForm:o}=t,c=null===o||void 0===o?void 0:o.wrapperComponent,{state:p,setState:f}=a,[y,z]=Object(s.useState)(!1),[U,I]=Object(s.useState)(),[Y,L]=Object(s.useState)(!1),[M]=Object(h.a)(),T=Object(d.a)(c),_=Object(s.useRef)(null);let A=Object(s.useRef)(null);const R=Object(s.useRef)(window.faceapi);let q=Object(s.useRef)(null);const[B]=Object(j.a)("/biometric_data/".concat(i.authData.userId)),P=Object(l.a)(Object.keys((null===o||void 0===o||null===(e=o.handleError)||void 0===e?void 0:e.errors)||o.stages),o.stages),{stageData:G,currentStage:K,nextStage:V,finalStage:W,setStageData:J}=P,X=async()=>{if(z(!0),!window.faceapi)return alert("No est\xe1n cargando las librer\xedas FACE_API");R.current=window.faceapi,await R.current.nets.tinyFaceDetector.loadFromUri(k),await R.current.nets.faceLandmark68Net.loadFromUri(k),await R.current.nets.faceRecognitionNet.loadFromUri(k),await R.current.nets.faceExpressionNet.loadFromUri(k),Z()},H=n=>{I(!0),_.current&&(_.current.srcObject=n)},Q=n=>{console.log("No hay camara conectada o los permisos han sido denegados",n),I(!1)},Z=()=>{if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,navigator.getUserMedia){var n;if(navigator.getUserMedia({video:!0},H,Q),!(null===(n=_.current)||void 0===n?void 0:n.addEventListener))return;_.current.addEventListener("play",(()=>{console.log("el streaming a comenzado",R.current);const n=R.current.createCanvasFromMedia(_.current);n.style.display="none",n.id="faceApiCanvas",document.querySelector("#videoContainer").append(n),q.current=n,R.current.matchDimensions(n,Object(u.getDisplaySize)()),z(!1)}))}},$=()=>{J((n=>({...n,solved:!0}))),setTimeout((()=>V()),1e3)},nn=(n,e)=>{const t=document.querySelector(".FRecScanner");sessionStorage.removeItem(null===G||void 0===G?void 0:G.key),A.current=setInterval((async()=>{const e=await R.current.detectAllFaces(_.current,new R.current.TinyFaceDetectorOptions).withFaceLandmarks().withFaceDescriptors().withFaceExpressions();if(null===e||void 0===e?void 0:e.length){var a,r;if(t&&!(null===t||void 0===t||null===(a=t.classList)||void 0===a||null===(r=a.value)||void 0===r?void 0:r.includes("scanning"))&&t.classList.add("scanning"),!T[null===G||void 0===G?void 0:G.key])return;const[i]=T[G.key](e[0],{...G,state:p,dataForm:o});if(console.log("ON detecions: ",i),!i||sessionStorage.getItem(null===G||void 0===G?void 0:G.key))return;n.style.display="none",f((n=>({...n,[null===G||void 0===G?void 0:G.key]:i||n[null===G||void 0===G?void 0:G.key]}))),clearInterval(A.current),sessionStorage.setItem(null===G||void 0===G?void 0:G.key,null===G||void 0===G?void 0:G.biometricId);const c=await M.addNewBiometricData({file:i.split(",")[1],biometric_id:G.biometricId,challenge_name:G.key});console.log("addNewBiometricData",c),!1===(null===c||void 0===c?void 0:c.data)&&$()}else{var i;console.log("Detectando...",q.current),t&&(null===t||void 0===t||null===(i=t.classList)||void 0===i?void 0:i.value.includes("scanning"))&&t.classList.remove("scanning")}}),e)};return Object(s.useEffect)((()=>(Y&&q.current&&!(null===G||void 0===G?void 0:G.solved)&&!W&&nn(q.current,600),console.log("|||||||||||||||||||||||||||||||||||||||||||||||||||||||||  stageData ==> ",G,p),()=>clearInterval(A.current))),[G,Y,y]),Object(s.useEffect)((()=>{console.log("||||||||||||| SOCKET biometricData ===> ",U,B),(null===B||void 0===B?void 0:B.challenge_name)===(null===G||void 0===G?void 0:G.key)&&("accepted"===B.state?Object(O.funcDebounces)({keyId:{[B.state]:B.id},storageType:"sessionStorage",timeExect:1500,callback:()=>{$()}}):"rejected"===B.state&&Object(O.funcDebounces)({keyId:{[B.state]:B.id},storageType:"sessionStorage",timeExect:1500,callback:()=>{nn(q.current,600)}}))}),[B]),Object(s.useEffect)((()=>{if(W){(async()=>{if(await M.disableTransactionSecutiry("biometric"),!r.orderData)return;const{orderData:{order:n,paymentProof:e}}=r;return M.confirmDepositOrder(n.id,e)})()}}),[W]),Object(s.useEffect)((()=>(Object(v.a)(X,"".concat(Object(m.b)("faceApi")),"faceApi"),()=>{var n,e,t;null===(n=_.current)||void 0===n||n.pause(),null===(e=_.current)||void 0===e||null===(t=e.srcObject)||void 0===t||t.getTracks()[0].stop()})),[]),W?Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(D,{component:"".concat(null===o||void 0===o?void 0:o.wrapperComponent,"/success"),handleDataForm:t,handleState:a,coinsendaServices:M,...r})}):Object(S.jsxs)(w.Layout,{className:"faceApiLayout__",children:[!Y&&Object(S.jsx)(D,{component:"biometricKycComponent/onBoardingAgreement",cameraAvailable:U,handleAction:()=>{L(!0)}}),Object(S.jsxs)(N,{id:"faceApiContainer",children:[Object(S.jsx)(b.default,{data:null===G||void 0===G?void 0:G.solved}),Object(S.jsx)("h3",{className:"FRecTitle fuente",children:"Reconocimiento Facial"}),Object(S.jsxs)(E,{id:"videoContainer",children:[y&&Object(S.jsx)("div",{className:"biometricLoaderContainer"}),Object(S.jsx)(g.Scanner,{className:"FRecScanner"}),Object(S.jsx)("video",{id:"streamingVideo",autoPlay:!0,ref:_,width:"100%",height:"100%"})]}),Object(S.jsxs)(C,{children:[Object(S.jsx)(F,{className:"".concat(0===K?"active":"")}),Object(S.jsx)(F,{className:"".concat(1===K?"active":"")})]}),Object(S.jsx)("h1",{className:"fuente",children:null===G||void 0===G?void 0:G.uiName}),Object(S.jsx)("p",{className:"fuente",children:"Mant\xe9n tu cabeza erguida y asegurate que tu rostro encaje dentro del circulo"})]})]})};const F=f.b.div(a||(a=Object(c.a)(["\n  width:7px;\n  height:12px;\n  background:#c9c9c9;\n  border-radius:5px;\n  margin:0 4px;\n  transition:.3s;\n  &.active{\n    height:22px;\n    background:#0198ff;\n  }\n"]))),C=f.b.div(r||(r=Object(c.a)(["\n  height:30px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),E=f.b.div(i||(i=Object(c.a)(["\n  position: relative;\n  clip-path: circle(37% at 50% 50%);\n\n  @media "," {\n    max-height: 300px;\n    clip-path: none;\n    width: fit-content;\n    justify-self: center;\n    overflow: hidden;\n    border-radius: 15px;\n  }\n"])),y.gb.laptopM),N=Object(f.b)(w.ContentContainer)(o||(o=Object(c.a)(["\n\n  justify-self:center;\n\n  .FRecTitle{\n    color:#0198ff;\n    font-weight:bold;\n  }\n  p{\n    text-align:center;\n    color:gray;\n    font-size: 1.2em;\n    max-width: 500px;\n    justify-self: center;\n  }\n  h1{\n    text-align:center;\n    font-size: 2.7em;\n    margin-bottom:0;\n  }\n  h3{\n    span{\n      color: transparent;\n      border-radius: 50%;\n      background: #2ad083;\n      margin-right: 10px;\n      font-size:15px;\n    }\n  }\n\n  @media "," {\n    padding: 10px 0;\n    height: calc(100vh - 20px);\n  }\n\n  @media (max-width: 768px) {\n    ","{\n      ","\n    }\n\n    padding: 30px 20px;\n    width:calc(100vw - 40px);\n    height: calc(100vh - 60px);\n\n    p{\n      font-size:1em;\n    }\n    h1{\n      font-size:2em;\n    }\n\n  }\n\n\n"])),y.gb.laptopM,E,"")},520:function(n,e,t){"use strict";var a=t(1),r=t(473),i=t(4);e.a=function(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[o,c]=Object(a.useState)(),[s,l]=Object(a.useState)(t),[d,u]=Object(a.useState)(e[n[s]]),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;s>=n.length||l((n=>n+e))},f=()=>{s<=0||l((n=>n-1))};return Object(a.useEffect)((()=>{var n;if(null===d||void 0===d||null===(n=d.settings)||void 0===n?void 0:n.queryParams){let n=Object(r.c)(d.settings.queryParams);null===i.hb||void 0===i.hb||i.hb.push(n)}}),[d]),Object(a.useEffect)((()=>{const t=e[n[s]];u(t)}),[s,e[n[s]]]),{currentStage:s,nextStage:p,prevStage:f,stageController:n,stageData:d,setStageData:u,stageStatus:o,setStageStatus:c,finalStage:s>=n.length}}},554:function(n,e,t){"use strict";t.r(e),t.d(e,"getDisplaySize",(function(){return a})),t.d(e,"getFrame",(function(){return r}));const a=()=>{const n=document.querySelector("#streamingVideo");return{width:n.clientWidth,height:n.clientHeight}},r=()=>{const{width:n,height:e}=a(),t=document.querySelector("#faceApiCanvas");t.width=n,t.height=e;const r=document.querySelector("#streamingVideo");return t.getContext("2d").drawImage(r,0,0,n,e),t.toDataURL("image/jpeg")}},565:function(n,e,t){"use strict";t.r(e);var a,r,i=t(2),o=t(1),c=t(3),s=t(481),l=t(620),d=t(4),u=t(0);const p=Object(c.c)(a||(a=Object(i.a)(["\n    0% {\n        opacity: 1;\n        transform: scale(1);\n    }\n    30% {\n        transform: scale(0);\n        opacity: 0;\n    }\n    50%{\n        transform: scale(0);\n        opacity: 0;\n    }\n    80%{\n        opacity: 1;\n        transform: scale(1.3);\n    }\n    100%{\n        opacity: 1;\n        transform: scale(0.9);\n        background:#2ad083;\n        border: 4px solid white;\n    }\n    "]))),f=c.b.div(r||(r=Object(i.a)(["\n    width: 60px;\n    height: 60px;\n    position: absolute;\n    border-radius: 50%;\n    background: white;\n    border: 2px solid #cfcfcf;\n    top:175px;\n    right:200px;\n    z-index: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    &.approve{\n        animation: "," .6s linear forwards;\n    }\n\n    @media "," {\n      top: 40px;\n      right: 180px;\n    }\n\n    @media (max-width: 768px) {\n      top: 100px;\n      right: 0;\n    }\n  "])),p,d.gb.laptopM);e.default=n=>{let{data:e}=n;const[t,a]=Object(o.useState)();return Object(o.useEffect)((()=>{e?a("approve"):setTimeout((()=>a()),400)}),[e]),Object(u.jsx)(f,{className:"".concat("approve"===t?"approve":"normal"),children:t?Object(u.jsx)(l.a,{size:37,color:"white"}):Object(u.jsx)(s.d,{size:30,color:"#a3a3a3"})})}},575:function(n,e,t){"use strict";t.r(e),t.d(e,"Scanner",(function(){return s}));var a,r,i=t(2),o=t(3);const c=Object(o.c)(a||(a=Object(i.a)(["\n    0% {\n        top:0%\n    }\n    15%{\n        top:30%\n    }\n    35%{\n        top:70%\n    }\n    50%{\n        top:100%\n    }\n    65%{\n        top:70%\n    }\n    85%{\n        top:30%\n    }\n    100%{\n        top:0%;\n    }\n"]))),s=o.b.div(r||(r=Object(i.a)(["\n    height: 3px;\n    width: 100%;\n    position: absolute;\n    top: 0%;\n    transition: .3s;\n    filter: blur(0.1em);\n    background: rgb(255 255 255 / 10%);;\n    animation: "," 1.2s linear infinite;\n    &.scanning{\n    background: #2ad083;\n    }\n"])),c)},665:function(n,e){},682:function(n,e,t){"use strict";var a=t(1);e.a=n=>{const[e,r]=Object(a.useState)();return Object(a.useEffect)((()=>{(async()=>{var e;let a={};try{a=await t(683)("./".concat(n,"/validations"))}catch(i){console.log(i)}r(null===(e=a)||void 0===e?void 0:e.default)})()}),[]),e}},683:function(n,e,t){var a={"./biometricKycComponent/validations":[570,9,140],"./kyc/validations":[540,9,28],"./onBoardingComponent/validations":[588,7,29],"./personalKycComponent/validations":[568,9,30]};function r(n){if(!t.o(a,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[n],r=e[0];return t.e(e[2]).then((function(){return t.t(r,e[1])}))}r.keys=function(){return Object.keys(a)},r.id=683,n.exports=r},684:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var a=t(1),r=t(661),i=t.n(r),o=t(26),c=t(21);function s(n,e){const{SocketUrl:t}=o.a,r=i()(t),[s,l]=Object(a.useState)(),d=async()=>{const{userToken:n}=await Object(c.d)(),e={body:{access_token:n}};r.emit("authentication",e)};return Object(a.useEffect)((()=>{r.on("connect",d),r.on("authenticated",(()=>{r.on(n,(n=>{l((e=>({...e,...n})))}))}))}),[]),[s]}}}]);
//# sourceMappingURL=12.6d34429b.chunk.js.map